/*
 * Swipe 1.0
 *
 * Brad Birdsall, Prime
 * Copyright 2011, Licensed GPL & MIT
 *
*/
;(function(a){if(typeof define==="function"&&define.amd){define(a)}else{if(typeof module==="object"&&module.exports){module.exports=a()}else{window.Swipe=a()}}})(function(){function a(c,b){if(!c){return null}var d=this;this.options=b||{};this.index=this.options.startSlide||0;this.speed=this.options.speed||300;this.callback=this.options.callback||function(){};this.delay=this.options.auto||0;this.container=c;this.element=this.container.children[0];this.container.style.overflow="hidden";this.element.style.listStyle="none";this.element.style.margin=0;this.setup();this.begin();if(this.element.addEventListener){this.element.addEventListener("touchstart",this,false);this.element.addEventListener("touchmove",this,false);this.element.addEventListener("touchend",this,false);this.element.addEventListener("touchcancel",this,false);this.element.addEventListener("webkitTransitionEnd",this,false);this.element.addEventListener("msTransitionEnd",this,false);this.element.addEventListener("oTransitionEnd",this,false);this.element.addEventListener("transitionend",this,false);window.addEventListener("resize",this,false)}}a.prototype={setup:function(){this.slides=this.element.children;this.length=this.slides.length;if(this.length<2){return null}this.width=Math.ceil(("getBoundingClientRect" in this.container)?this.container.getBoundingClientRect().width:this.container.offsetWidth);if(this.width===0&&typeof window.getComputedStyle==="function"){this.width=window.getComputedStyle(this.container,null).width.replace("px","")}if(!this.width){return null}var c=this.container.style.visibility;this.container.style.visibility="hidden";this.element.style.width=Math.ceil(this.slides.length*this.width)+"px";var b=this.slides.length;while(b--){var d=this.slides[b];d.style.width=this.width+"px";d.style.display="table-cell";d.style.verticalAlign="top"}this.slide(this.index,0);this.container.style.visibility=c},slide:function(b,d){var c=this.element.style;if(d==undefined){d=this.speed}c.webkitTransitionDuration=c.MozTransitionDuration=c.msTransitionDuration=c.OTransitionDuration=c.transitionDuration=d+"ms";c.MozTransform=c.webkitTransform="translate3d("+-(b*this.width)+"px,0,0)";c.msTransform=c.OTransform="translateX("+-(b*this.width)+"px)";this.index=b},getPos:function(){return this.index},prev:function(b){this.delay=b||0;clearTimeout(this.interval);if(this.index){this.slide(this.index-1,this.speed)}else{this.slide(this.length-1,this.speed)}},next:function(b){this.delay=b||0;clearTimeout(this.interval);if(this.index1||b.scale&&b.scale!==1){return}this.deltaX=b.touches[0].pageX-this.start.pageX;if(typeof this.isScrolling=="undefined"){this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)0||this.index==this.length-1&&this.deltaX<0)?(Math.abs(this.deltaX)/this.width+1):1);this.element.style.MozTransform=this.element.style.webkitTransform="translate3d("+(this.deltaX-this.index*this.width)+"px,0,0)";b.stopPropagation()}},onTouchEnd:function(d){var c=Number(new Date())-this.start.time<250&&Math.abs(this.deltaX)>20||Math.abs(this.deltaX)>this.width/2,b=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;if(!this.isScrolling){this.slide(this.index+(c&&!b?(this.deltaX<0?1:-1):0),this.speed)}d.stopPropagation()}};return a});